<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- CDN 방식 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

    <script>
        
        //DOM Tree가 모두 완료된 후 호출, ready내의 함수 안에서는 아직 만들지 않은 body태그 안에 태그에 접근할 수 있음
        $(document).ready(function(){
            // 가. $(selector).eq(idx) ==> 1차 필터링 후 idx와 일치하는 요소 2차 필터링한다. 0부터 시작
            // $("li").eq(3).css("color", "red");

            // 나. $(selector1).filter(selector2) ==> selector1로 1차 필터링 후 selector2로 2차 필터링한다.
            // $("p").filter(".middle").css("color", "red");

            // 다. $(selector1).not(selector2) ==> selector1로 1차 필터링 후 selector2가 아닌 것으로 2차 필터링한다.
            // $("p").not(".middle").css("color", "red");
            
            // 라. $(selector1).is(selector2) ==> selector1로 1차 필터링 후 selector2에 해당하는 2차 필터링이 존재하면 true 반환
            // var result  = $("p").filter("[class]").is(".middle");
            // console.log(result);

            // 마. $(selector1).has(selector2) ==> selector1로 1차 필터링 후 selector2를 포함하는 2차 필터링 요소 반환
            // $("li").has("span").css("color", "red");  // li 태그 중 span 태그를 가지고 있는 애 반환

            // 바. $(selector).first() ==> selector로 1차 필터링 후 첫번째 요소 반환
            // $("li").first().css("color", "red");
            // $("li").last().css("font-size", "40px");

            // 사. $(selector).slice(start[,end]) ==> selector로 1차 필터링 후 start-end 범위의 요소 반환
            // $("li").slice(0,3).css("font-size", "40px");

            // 아. $(selector).map(function) ==> selector로 1차 필터링 후 fn 함수를 적용하여(가공후) 반환
            // var result = $("li").map(function(a, b){
            //   console.log(a, b, b.innerText);  // a와 b는 fn이 없으므로 자바스크립트 객체임
            //   return b.innerText.toUpperCase();
            // })
            // console.log(result);

            // var result = $("li").map(function(idx, ele){
            //   console.log(idx, ele, ele.innerTex);
            //   console.log($(ele), $(ele).text());   // undefined, jQuery객체는 innerText가 없음
            //   return $(ele).text().toUpperCase;
            // })
            // console.log(result);

            // this
            var result = $("li").map(function(idx, ele){
              console.log(ele, this);  // ele 통해서 list item을 얻어올 수도 있고, this를 통해서도 list item을 얻어올 수 있음. // this는 ele에 전달된 요소를 의미
              console.log($(ele), $(this));
              console.log($(ele).text(), $(this).text());
              return $(this).text().toUpperCase;
            });
            console.log(result);
        });
    </script>

</head>
<body>
  <!-- # 3. 2차 필터링1 - 기본 -->
  <p>text</p>
  <p class="middle">Middle <span>text</span></p>
  <p class="final">final text</p>
  
  <div>
      <ul>
        <li>list item 1</li>
        <li>list item 2</li>
        <li><span>list item 3</span></li>
        <li>list item 4</li>
      </ul>
  </div>
</body>
</html>